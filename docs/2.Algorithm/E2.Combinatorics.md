---
id : E2.Combinatorics
title : E2.Combinatorics
typora-root-url : ../
---

# 组合数学

（Combinatorics）

组合数学的通用问题

- **排列的存在性**

  如果排列不总是可行，什么样的(必要条件和充分条件)可实现

- **排列的列举或分类**

理解列出所有排列和确定它们之间的数量差异

- **研究已知的排列**

  构建特定条件的排列,研究性质和结构

- **构造最优排列**
  主要工具:数学归纳法

## 问题

### 1.棋盘的完美覆盖

$m \times n$棋盘有b格牌的完美覆盖的条件：

1. 没有两个b格牌重叠
2. 每一个b格牌覆盖棋盘上b格方格
3. 棋盘上的所有方格被覆盖

> **Q1**：对于$m \times n$的棋盘,$1 \times 2$的骨牌

**Key**：有完美覆盖当且仅当m和n至少有一个为偶数

>**Q2**：对于$m \times m$并且删除一条对角线上两个对角的棋盘,$1 \times 2$的骨牌

**Key**：把方格交替着黑色和白色,对角线上的两个对角颜色一定相同,不存在完美覆盖

>**Q3**：对于$m \times n$的气派,交替着黑白,随机切掉一些方格,何时剩下的方格有完美覆盖

  **必要条件**:切过的棋盘必有同数目的黑白格

>**Q4**：对于$m \times n$的棋牌,$1 \times b$的骨牌(b格牌)

**一个充分条件**： b是m或n的一个因子
**必要条件**：b是$m \times n$的一个因子

- b是素数,$m \times n$棋盘可能被b格牌完美覆盖的充要条件：b是m或n的因子

- 证明当b是合数时，$m \% b$为0或 $n\%b$为0

$$
\begin{aligned} 
\begin{cases}
  m =& p*b + r,  \quad 其中0 \leq r  \leq b - 1 \\
  n = & q*b + s,  \quad 其中0 \leq s  \leq b - 1 \\
\end{cases}
\end{aligned}
$$

因为m和n可以调换，所以在不损失一般性的情况下我们可以假设$r \leq s$,所以只需证明$r = s$

考虑一个边长为b的正方形，对其按照下图规则涂色：

![](/Image/E2.Combinatorics-photo/v2-5483d98730778cb74be3f191f91059c5_hd.jpg)

任何填充的b牌必须包含有从1到b的b个格子or颜色，所以完全填充的条件即可表示为整个棋盘上有相同的数量的$1,2,3 \cdots, b$。

按此方法,填充$10 \times 11,b=4$的棋盘,相当与以上述涂色规则,排列大棋盘,切割出要求的棋盘

![](/Image/E2.Combinatorics-photo/v2-35dcd4ab88bd35c04741a6b680406e01_hd.jpg)分解为3个部分：

上方:$pb * n$,每种颜色出现$p * n$次

左下:$r * qb$,每种颜色出现$r * q$次

右下:$r * s$,要求每种颜色数量相同

对于$r * s$部分, 因为$r \leq s$,并且按照涂色规则有r个颜色1,即此部分面积应为$r * b$

$\implies$$r *s =r *b$

若$r \neq 0 \implies s=b$,与条件$0 \leq s \leq b - 1$矛盾,所以$r=0$必定成立,得证

**综上：$m \times n$棋盘有b格牌的完美覆盖当且仅当b是m或n的一个因子**

**Extra**:断层线



### 2.幻方

> **n阶幻方**：由$1,2,3 \cdots, n^2$,按如下方式构成$n \times n$矩阵:每行,列及两条对角线的数字总和相等为s(又称该幻方的幻和)

$$
3阶幻方=\begin{bmatrix}
8 & 1 & 6 \\
3 & 5 & 7 \\
4 & 9 & 2 \\
\end{bmatrix}
\quad
4阶幻方=\begin{bmatrix}
16 & 3 & 2 & 13 \\
5 & 10 & 11 & 8 \\
9 & 6 & 7 & 12 \\
4 & 15 & 14 & 1\\
\end{bmatrix}\tag{1.1}
$$

n阶幻方所有整数和$=\sum_{i=1}^{n^2}i=\frac{n^{2}(n^2+1)}{2}$

幻合: $s=\frac{n(n^2+1)}{2}$

> n(n>2)阶幻方的构造方法,不存在2阶幻方(s为5)



1.La Loubere 法奇数幻方构造

1. **一居上行正中央**：数字1处于第一行的中间

   **依次斜填切莫忘**

2. **上出框时向下放**：处于第一行时,next:最后一行,前一个整数的后一列

3. **右出框时向左放**：处于最右列时,next:最左一列,前一个整数的上一行

4. **排重便在下格填,右上排重一个样**：处于已填充位置或幻方的右上角,next:前一个数的直接下方

$$
5阶幻方=
\begin{bmatrix}
17 & 16 &  1 & 8 & 15 \\
15 & 5 & 7 & 14 & 16 \\
4 & 6 & 13 & 20 & 22  \\
10 & 12 & 19 & 21 & 3 \\
11 & 18 & 17& 2 & 9 \\
\end{bmatrix}
$$

> **n阶幻立方**：由$1,2,3 \cdots, n^3$,按如下方式构成$n \times n \times n$立方矩阵,下述直线上n个数字的和s(该幻立方的幻合)
>
> 1. 与立方体平行的直线
> 2. 每个平面截面的两条对角线
> 3. 四条空间对角线

n阶幻立方的幻合：$s = \frac{n(n^3 + 1)}{2}$,而且以$3n^2+4$种形式出现
$$
对于任意3 \times 3截面 =
\begin{bmatrix}
a & b & c \\
x & y & z\\
d & e & f\\
\end{bmatrix}
\quad
\begin{aligned}
a+y+f = & \  b+y+e =&\\
c+y+d =& \ a+b+c =&\\
d+e+f = & \ 42
\end{aligned}
$$

**Tips**：y处于中心，y应该为$\frac{42}{3}=14$

上述表明:14为幻立方每个平面截面的中心,但有7(==why?==)个平面截面

不存在2,3阶幻立方

n阶立方体有$3n^2$条平行于边的直线，有4条(体)对角线，三个方向共6n条剖面对角线。



### 3.四色问题

> 对于平面上或球面上的任意一张地图,只用四种颜色就能使具有共同边界的国家着上不同的颜色
>
> 将平面任意地细分为不相重叠的区域，每一个区域总可以用1234这四个数字之一来标记而不会使相邻的两个区域得到相同的数字
>
> 四色定理的本质正是二维平面的固有属性，即平面内不可出现交叉而没有公共点的两条直线。

### 4.36军官问题

> 从不同的6个军团各选6种不同军阶的6名军官共36人，排成一个6行6列的方队，使得各行各列的6名军官恰好来自不同的军团而且军阶各不相同，应如何排这个方队？

用有序对$(i, j)$,其中$i(i = 1,2,\cdots,6)$表示军官的军衔;$\quad j(j = 1,2,\cdots,6)$表示军官所属军团，eg：用(1，2)表示来自第一个军团具有第二种军阶的军官，则欧拉的问题就是如何将这36个数对排成$6 \times 6$的矩阵，使得每行每列的数对无论从第一个数看还是从第二个数看，都恰好是由$1、2、3、4、5、6$组成



将矩阵分割成两个$6 \times 6$的矩阵,分别对应军衔矩阵和军团矩阵,因此又可陈述为:

是否存在两个$6 \times 6$的矩阵,他们每项取自$1,2,\cdots, 6$,使得

1. 两个矩阵每行,每列都是$1,2,\cdots, 6$的某种组合
2. 当并置两个矩阵时,所有有序对$(i, j)(i=1,2,\cdots,6;\quad j = 1,2,\cdots, 6)$全部出现



> **拉丁方阵**（英语：Latin square）是一种 n × n 的方阵，在这种 n × n 的方阵里，恰有 n 种不同的元素，每一种不同的元素在同一行或同一列里只出现一次
>
> 设有两个阶数相同的拉丁方阵$A_1=(a_{i, j}^{(1)})_{n\times n},A_2=(a_{i, j}^{(2)})_{n\times n}$,其中将所有放置位置相同的元素组成一个二元组，组合成一个新的矩阵${((a_{i,j}^{(1)},a_{i,j}^{(2)}))_{n\times n}}$, 当这个新的矩阵${\displaystyle ((a_{i,j}^{(1)},a_{i,j}^{(2)}))_{n\times n}}$即为一中每一个元素互不相同时，拉丁方阵$A_1$和$A_{2}$是互相正交的。 此时，$A_{1}$和$A_{2}$即为一对**正交拉丁方**。 而在阶数固定的情况下，所有两两正交的拉丁方所成的集合称为**正交拉丁方族**。

