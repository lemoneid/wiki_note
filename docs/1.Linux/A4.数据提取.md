---
id : A4.数据提取
title : A4.数据提取
typora-root-url : ../
---







# 数据提取

### 常见命令



| 命令  | 说明                 | 命令  | 说明               |
| ----- | -------------------- | ----- | ------------------ |
| cut   | 切分                 | grep  | 检索               |
| sort  | 排序                 | wc    | 统计字符,字数,行数 |
| uniq  | 去重(只去除连续相邻) | tee   | 双向重导项         |
| split | 文件切分             | xargs | 参数代换           |
| tr    | 替换,压缩和删除      |       |                    |



### grep 命令 ：强大的文本’搜索’工具

```sh
   1.grep   -n   'word'  file_name
	在file_name文件中找到word所在的所有行并显示。-n 为显示行号。
	2.grep   'w[ea]ll'   file_name
	在file_name文件中找到wall 或者是well 所在的所有行并显示
	 3.grep    'w[^e]ll'   file_name
	在file_name文件中找到”非well” 所在的所有行并显示
	4.grep   '^The'   file_name 
在file_name文件中找到以The开头的所有行并显示（请与上一条命令进行区别）
   5. grep       'goo..le'      file_name
在file_name文件中找到goo(任意字符)(任意字符)le的所有行并显示(即总共七个字符)
	6.grep    'g*g'     file_name
在file_name文件中找到g , gg , ggg等的所有行并显示（*代表重复前一个字符0～～无穷多次）
	7.grep   'Ty\{2,3\}'    file_name 
在file_name文件中找到Tyy,Tyyy的所有行并显示(注意{}在 shell中有特殊含义，故需要转义)
```

###   sed :实现数据的替换，删除，增加，选取等(以行为单位进行处理

```shell
	1.sed    '2,4d'    file_name
	删除file_name文件的2到4行
	2.sed  '2a liu .....\
 >shengxi is shuai !!!'  file_name 
 在第二行下新增这样两行
 	3.sed   '2,4c    ni han ma   a !!!'    file_name 
 	 把file_name文件的2到4行，替换为ni han ma a !!
 	 4.sed   '2,5p' -n  file_name
 	 把file_name文件的2到5行打印出来(不用-n 参数，就会重复输出
 	 5.sed  -i  's/a\[t\]\./p_temp->/g'     file_name 
 	 把file_name文件中的a[t]. 全部替换为p_temp-> (-i 会直接将修改写入文件，[ ] 和 . 是特殊符号，需要用\来转义一下)
	6.sed 's/test/trial/2' data4.txt
将替换标记指定为 2 的结果就是:sed编辑器只替换每行中第二次出现的匹配模式。 g 替换标
记使你能替换文本中匹配模式所匹配的每处地方。
	7s.sed -n 's/test/trial/p' data5.txt
-n 选项将禁止sed编辑器输出。但 p 替换标记会输出修改过的行。将二者配合使用的效果就是
只输出被替换命令修改过的行。

$ sed '2,$s/\/bin\/bash/\/bin\/csh/' /etc/passwd
由于正斜线通常用作字符串分隔符,因而如果它出现在了模式文本中的话,必须用反斜线来
转义。2,$s 制定行数
ed编辑器允许选择其他字符来作为替换命令中的字符串分隔符:
$ sed 's!/bin/bash!/bin/csh!' /etc/passwd
在这个例子中,感叹号被用作字符串分隔符

$sed -n '/ this is a test$/p' data4
this is a test
行首锚点和行尾锚点组合,查找只含有特定文本模式的数据行
sed '/^$/d' data1.txt
删除空行
```

### awk : 以字段为单位进行处理(其实就是把一行的数据分割，然后进行处理)

```shell
 1.$0   代表一整行的数据
 2.$1   代表第一个字段，用人的话来说就是第一列的数据
 3.$2   以此类推
 4.NF   每一行拥有的字段总数
 5.NR   目前处理的是第几行的数据
 6.FS   目前的分隔字符
 7.命令格式 ：awk   '条件{命令1} 条件{命令2}...'   file_name

  1. awk      'NR<6{print   $1  "\t"  $2 }'     file_name  
把file_name 文件中的前五行的第一列，第二列的数据列出来 （以[tab]或空格键分隔）
  2.awk   '{print "该行数据为" $0 "\t" "该行的字段总数为"  NF   "\t"  "目前这是第几行"  NR}'   file_name
  3.  awk      'BEGIN{FS=":"}  $3<10{print $1 "\t" $3}'     /etc/passwd 
  
  1.print 默认带有换行符，printf 没有 
  2.像\n ,\t,这种符号应该用双引号括起来 
  3.NR，NF等变量要用大写，并且不需要 $ 
```

## 三剑客命令总结：

```sh
-记住三个命令的运用形式
     grep    '字符'       文件
     sed     '命令'       文件
     awk    '条件{命令}'   文件
单引号内就是正则表达式的用法
```



